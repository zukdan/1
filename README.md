–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä! üöÄ Ubuntu 22.04 LTS (Jammy Jellyfish) ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è, –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–∞–∫ –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π, —Ç–∞–∫ –∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤. –ù–æ, –∫–∞–∫ –∏ –ª—é–±—É—é —Å–∏—Å—Ç–µ–º—É, Ubuntu –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –æ–Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–í–æ—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Ubuntu 22.04 LTS üõ°Ô∏èüëá

üîê 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt update && sudo apt upgrade -y && sudo apt autoremove -y
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ ‚Äî –¥–µ–ª–∞–π —ç—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ!

üî• 2. –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ (UFW)
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install ufw
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw enable
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo ufw status verbose
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å SSH ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à–∏ –µ–≥–æ –î–û –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–π—Ä–≤–æ–ª–∞:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo ufw allow ssh
üß± 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Fail2Ban (–∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞)
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install fail2ban
sudo systemctl enable fail2ban --now
–°–æ–∑–¥–∞–π –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:

ini
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
[sshd]
enabled = true
maxretry = 5
bantime = 1h
üß© 4. –ê–∫—Ç–∏–≤–∞—Ü–∏—è AppArmor
Ubuntu 22.04 —É–∂–µ –∏–¥—ë—Ç —Å AppArmor, –Ω–æ —Å—Ç–æ–∏—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo aa-status
–ï—Å–ª–∏ –æ–Ω –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo systemctl enable apparmor --now
–ú–æ–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo aa-enforce /etc/apparmor.d/*
üõ° 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install unattended-upgrades
sudo dpkg-reconfigure unattended-upgrades
–ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ /etc/apt/apt.conf.d/50unattended-upgrades

üîç 6. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
–£–±–µ—Ä–∏ –≤—Å—ë –ª–∏—à–Ω–µ–µ:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt autoremove --purge
–û—Ç–∫–ª—é—á–∏ –∏ —É–¥–∞–ª–∏ –Ω–µ–Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo systemctl disable avahi-daemon
sudo systemctl stop avahi-daemon
üß™ 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä—É—Ç–∫–∏—Ç—ã
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install rkhunter chkrootkit
sudo rkhunter --update
sudo rkhunter --check
sudo chkrootkit
üîê 8. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ –∏ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
–ï—Å–ª–∏ –Ω–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–ª –¥–∏—Å–∫ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LUKS –∏–ª–∏ VeraCrypt, –Ω–æ —ç—Ç–æ –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

–î–ª—è –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install ecryptfs-utils
ecryptfs-migrate-home -u $USER
‚ö†Ô∏è –°–¥–µ–ª–∞–π —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ —ç—Ç–∏–º!

üë• 9. –ù–∞–¥—ë–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–∞
–ò—Å–ø–æ–ª—å–∑—É–π —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏

–í–∫–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É:

Settings ‚Üí Privacy ‚Üí Screen Lock ‚Üí –≤–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É

üîë 10. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 2FA —Å Google Authenticator (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install libpam-google-authenticator
google-authenticator
–î–æ–±–∞–≤—å PAM-–º–æ–¥—É–ª—å:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo nano /etc/pam.d/gdm-password
–í—Å—Ç–∞–≤—å —Å—Ç—Ä–æ–∫—É:

swift
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
auth required pam_google_authenticator.so
üßº 11. –£–¥–∞–ª–µ–Ω–∏–µ "—à–ø–∏–æ–Ω–æ–≤" –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
Ubuntu –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—É—é —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é:

–û—Ç–∫–ª—é—á–∏:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt purge popularity-contest apport whoopsie
üß† 12. –£—Å—Ç–∞–Ω–æ–≤–∏ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å (–µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—à—å —Å Windows-—Ñ–∞–π–ª–∞–º–∏)
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo apt install clamav clamtk
sudo freshclam
üìã –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
–ù–∞—Å—Ç—Ä–æ–π–∫–∞	–°—Ç–∞—Ç—É—Å
–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–∑–∞–ø–ª–∞—Ç–∫–∏	‚úÖ
UFW (—Ñ–∞–π—Ä–≤–æ–ª–ª)	‚úÖ
Fail2Ban	‚úÖ
AppArmor	‚úÖ
–ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–∞	‚úÖ
–°–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏	‚úÖ
–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ /home –∏–ª–∏ –¥–∏—Å–∫–∞	‚úÖ / ‚ö†Ô∏è
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ rootkits	‚úÖ
2FA	‚úÖ / üí°
–£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏	‚úÖ
üõ†Ô∏è –•–æ—á–µ—à—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å?
–•–æ—á—É, –º–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å bash-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—Å—ë —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∞–º ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç, –Ω–∞—Å—Ç—Ä–æ–∏—Ç, –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç üîê
–•–æ—á–µ—à—å? –ò–ª–∏ –º–æ–∂–µ—Ç —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Ubuntu –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä, —Ä–∞–±–æ—á—É—é —Å—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?
